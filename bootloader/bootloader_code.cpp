/*unsigned char bootloader_code[] = {
	0x6a, 0x00, //pushq $0x0
 	0x9d, //popfq
 	0x66, 0xb8, 0x00, 0x00, //mov $0x0,%ax
 	0x8e, 0xd8, //mov %eax,%ds
 	0x8e, 0xc0, //mov %eax,%es
 	0x8e, 0xe0, //mov %eax,%fs
 	0x8e, 0xe8, //mov %eax,%gs
 	0x8e, 0xd0, //mov %eax,%ss


	0xb8, 0x00, 0x20, 0x00, 0x00, //
	0x0f, 0x22, 0xd8,
	0x0f, 0x20, 0xe0, //mov %cr4,%rax
	0x83, 0xc8, 0x20, //or $0x20,%eax
	0x0f, 0x22, 0xe0, //mov %rax,%cr4
	0xb9, 0x80, 0x00, 0x00, 0xc0, //mov $0xc0000080,%ecx
	0x0f, 0x32, //rdmsr
	0x0d, 0x00, 0x01, 0x00, 0x00, //or $0x100,%eax
	0x0f, 0x30, //wrmsr
	0x0f, 0x20, 0xc0, //mov %cr0,%rax
	0x0d, 0x00, 0x00, 0x00, 0x80, //or $0x80000000,%eax
	0x0f, 0x22, 0xc0, //mov %rax,%cr0
	//0x57, // pushl %edi
	//0xc3, // ret
	0xff, 0xe7 // jmp %edi
};*/

unsigned char bootloader_code[] = {
  0x0f, 0x20, 0xc0,             				//mov    %cr0,%eax
  0x0d, 0x00, 0x00, 0x00, 0x80,       			//or     $0x80000000,%eax
  0x0f, 0x22, 0xc0,             				//mov    %eax,%cr0
  0xea, 0x12, 0x00, 0x00, 0x00, 0x18, 0x00, 	//ljmp   $0x18,$0x12
  0xff, 0xe7                					//jmp    *%edi
};