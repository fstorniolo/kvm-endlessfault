/*// bootloader originale
unsigned char bootloader_code[] = {
  0x0f, 0x20, 0xc0,             				//mov    %cr0,%eax
  0x0d, 0x00, 0x00, 0x00, 0x80,       			//or     $0x80000000,%eax
  0x0f, 0x22, 0xc0,             				//mov    %eax,%cr0
  0xea, 0x12, 0x00, 0x00, 0x00, 0x18, 0x00, 	//ljmp   $0x18,$0x12
  0xff, 0xe7                					//jmp    *%edi
};*/

unsigned char bootloader_code[] = {
//	00000000 <_start>:
	0xfa,										//cli
	0x0f, 0x20, 0xe0,							//mov	%cr4,%eax
	0x83, 0xc8, 0x20,							//or	$0x20,%eax
	0x0f, 0x22, 0xe0,							//mov	%eax,%cr4
	0xb9, 0x80, 0x00, 0x00, 0xc0,				//mov	$0xc0000080,%ecx
	0x0f, 0x32,									//rdmsr
	0x0d, 0x00, 0x01, 0x00, 0x00,				//or	$0x100,%eax
	0x0f, 0x30,									//wrmsr
	0x0f, 0x20, 0xc0,							//mov	%cr0,%eax
	0x0d, 0x00, 0x00, 0x00, 0x80,				//or	$0x80000000,%eax
	0x0f, 0x22, 0xc0,							//mov	%eax,%cr0
	0x0f, 0x01, 0x15, 0x10, 0x10, 0x00, 0x00,	//lgdtl	0x1010
	0xea, 0x31, 0x00, 0x00, 0x00, 0x08, 0x00,	//ljmp	$0x8,$0x31

//	00000030 <long_mode>:
	0x6a, 0x00,									//push	$0x0
	0x9d,										//popf
	0x66, 0xb8, 0x00, 0x00,						//mov	$0x0,%ax
	0x8e, 0xd8,									//mov	%eax,%ds
	0x8e, 0xc0,									//mov	%eax,%es
	0x8e, 0xe0,									//mov	%eax,%fs
	0x8e, 0xe8,									//mov	%eax,%gs
	0x8e, 0xd0,									//mov	%eax,%ss
	0xff, 0xe7,									//jmp	*%edi

};